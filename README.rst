=======================
gnome-bt-profile-toggle
=======================

script to toggle Bluetooth device audio profile

why
===
My Ubuntu does not support multi-profile Bluetooth connect or switching
automatically between HeadSet and A2DP audio profiles.
When in need to switch from listening music to conference call one has to
manually go to sound settings and change the profile.

This simple Python script allows to toggle between those profiles from CLI,
and can be assigned to a keyboard shortcut.

install
=======

Dependencies are ``pulsectl`` and ``PyGObject`` Python libraries.

Easiest way I've found is to install ``pulsectl`` into the user space
as you most probably already have ``PyGObject`` installed
when using GNOME desktop::

    pip3 install --user pulsectl


Alternatively can be installed in virtualenv but will require quite a number
of dependencies to compile ``PyGObject``, see the ``bindep.txt`` for list of
packages to install (may be not complete, and only tested on my local
Ubuntu 18.04 desktop).

Place the ``bttoggle.py`` somewhere stable
(like ``~/.local/bin`` or ``/usr/local/bin``).

configure
=========

To have a keyboard shortcut, go to the
``GNOME Settings -> Devices -> Keyboard`` settings,
scroll down and add a new shortcut under ``Custom Shortcuts``
(I use ``<Super>-B``) pointing to python3 (system or virtualenv) and location
of the ``bttoggle.py`` script

TODO
====

#. Create a proper pip-installable Python package,
   with autogenerated executable script
#. (More ambitious for my skills) rewrite in JavaScript and turn into proper
   GNOME Shell Extension

   - can take inspiration from
     `Nothing to say <https://github.com/wbolster/nothing-to-say>`_
     and
     `Sound Input & Output Device Chooser <https://github.com/kgshank/gse-sound-output-device-chooser>`_
     extensions I already use personally.
